# RegPulse Lakehouse Demo (Ontology-First Regulatory Intelligence)

??????**???? + ???? + ?????**???? Demo??????? Ontology ??????????????????????????????**???????????????????**????????????????????

---

**??**
1. ?????
2. ????
3. ?????????
4. ???????
5. ???????????
6. ??????
7. ?????
8. ?????ASCII?
9. ???????
10. ????

---

**1. ?????**
- ????????????????????????????????
- ??????????????????????????????????????????LLM + ???? + ???????????????????
- ???? LLM ??????????????????????????????????????????????/?RAG?**Ontology ??? + Review Queue**???????????
- ????????????????????????????????

![Strategic Value](docs/images/Screenshot_2026-02-05_145139.png)

---

**2. ????**
- ???`apps/web`?React + Vite?
- ???`services/api`?Fastify + TypeScript?
- ???`packages/ontology`
- ?????`packages/shared`
- ????PostgreSQL + pgvector
- ?????Redis + BullMQ
- LLM?OpenAI API????????????web_search?????
- ?????????`services/api/storage/objects`

---

**3. ?????????**
- ? Demo ??????????????? PostgreSQL + pgvector??????????
- Ontology????????**?????**?
  - ????????/???/??/???/???????????
  - Evidence ???????????????
  - Trust Tier ???Tier B/C/D ???? Review Queue?
- ???**?????????????????**?

---

**4. ???????**
- Trust Tier?
  - `TIER_A_BINDING`???????????
  - `TIER_B_OFFICIAL_SIGNAL`??????????
  - `TIER_C_SOFT_REQ`??????????
  - `TIER_D_QUARANTINE`?????????
- Monitoring Stages?
  - Drafting ? Official ? Comitology ? Interpreting ? Use&Registration
- ?????
  - `services/api/config/trust-policy.json`

---

**5. ???????????**
- `apps/web/` ????
- `services/api/` ?? API ???
- `packages/ontology/` ???????
- `packages/shared/` ????? DTO ???

???????????
- `services/api/src/services/scan.ts` ???????????? web_search ???
- `services/api/src/services/vectorize.ts` ?????????3000/overlap 300/max 30?
- `services/api/src/services/merge.ts` ???????
- `services/api/src/ontology/validator.ts` ???????????
- `services/api/src/ontology/policy.ts` ???????
- `services/api/src/connectors/` ????EU News / GlobalAutoRegs / Generic?
- `services/api/src/connectors/fetcher.ts` ????? UNECE ????GAR ?????
- `services/api/src/storage/object-store.ts` ???????
- `services/api/src/storage/gar-index.ts` GAR ????????
- `services/api/src/lineage.ts` ???????URL ?????
- `services/api/src/repository.ts` ?????
- `services/api/src/index.ts` API ??
- `services/api/src/worker.ts` BullMQ worker ??
- `apps/web/src/components/` ??????
- `scripts/dev-all.ps1` Windows ????
- `scripts/dev-all.sh` macOS/Linux ????

---

**6. ??????**
- ????????????
- ??????????????????
- ???????????????
- ??????????? + ????
- ????????? + Review Queue ??
- Review Queue?????/????
- Ontology Browser????????
- Lineage Graph????????????
- Vector Store ???????????

---

**7. ?????**
- OpenAI Key ?????????????
- ????????????? `robots.txt`?
- Evidence ????????
- ???????????? Review Queue?

---

**8. ?????ASCII?**
```
Sources (whitelist)
   |
   v
Connectors / web_search
   |
   v
SourceDocument -----> Vectorize (chunking) -----> pgvector
   |
   v
LLM Extract (JSON Schema)
   |
   v
Ontology Validate
   |                     \
   |                      -> Review Queue (Tier B/C/D)
   v
Main Tables (RegulationItem)
   |
   v
Merge -> Requirement / DataGap
   |
   v
Lineage Graph
```

![System Dataflow](docs/images/deepseek_mermaid_20260205_91e63a.png)

---

**9. ???????**
?????
- Node.js 18+??? 20+?
- Docker Desktop??? PostgreSQL/Redis?

?????????
```
# Windows
npm run dev:all

# macOS / Linux
bash scripts/dev-all.sh
```
????
- ?? node/npm/docker ???
- ?????????????
- ?? Docker daemon?????? Docker Desktop?
- ???? `regpulse-postgres` / `regpulse-redis`
- ?? API + Worker + Web
- ????? `logs/`

???????????
```
docker run --name regpulse-postgres -e POSTGRES_USER=user -e POSTGRES_PASSWORD=password -e POSTGRES_DB=regpulse -p 5432:5432 -d pgvector/pgvector:pg16
docker run --name regpulse-redis -p 6379:6379 -d redis:7
```

?????
```
services/api/.env
OPENAI_API_KEY=??key
OPENAI_MODEL=gpt-5.2
DATABASE_URL=postgres://user:password@localhost:5432/regpulse
REDIS_URL=redis://localhost:6379

# ???GAR/UNECE ????
GAR_RATE_LIMIT_RPS=1
GAR_USER_AGENT=...
GAR_RETRY_COOLDOWN_MINUTES=0
UNECE_USER_AGENT=...
UNECE_COOKIE=...
UNECE_REFERER=...
```

?????????
```
npm run dev:api
npm run dev:worker
npm run dev
```

???
- Web: http://localhost:5173
- API: http://localhost:8080/api/config

---

**10. ????**
????????????????????  
?????????????????????????  
??????????????? `robots.txt` ???  
???? Demo ??????????????
